<!DOCTYPE html><html lang="en"><head><title>ROS Lesson2 | Kuyman&#39;s blog</title><meta charset="utf-8"><meta http-equiv="x-dns-prefetch-control" content="on"><meta http-equiv="X-UA-Compatible"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="#0097A7"><meta name="author" content="Kuyman"><meta name="description" content="null"><meta name="keywords" content="null,ROS Lesson"><link rel="icon shortcut" type="image/ico" href="/img/favicon.png"><link rel="icon" sizes="192x192" href="/img/favicon.png"><link rel="apple-touch-icon" href="/img/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="apple-mobile-web-app-title" content="Title"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="480"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content="Kuyman&#39;s blog"><meta property="og:url" content="http://Kuyman2v.github.io"><meta property="og:type" content="blog"><meta property="og:title" content="ROS Lesson2 | Kuyman&#39;s blog"><meta property="og:description" content="null"><meta property="og:article:tag" content="ROS Lesson"><!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.en.js"></script>
        
    <![endif]--><link rel="stylesheet" href="/css/material.css"><link rel="stylesheet" href="/css/style.css"><style>body,html{font-family:[object Object]}a{color:#00838F}#scheme-Paradox .hot_tags-count,#scheme-Paradox .sidebar-colored .sidebar-badge,#scheme-Paradox .sidebar-colored .sidebar-header,#scheme-Paradox .sidebar_archives-count,#search-form-label:after,#search-label,.mdl-card__media{background-color:#0097A7!important}#scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus,#scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover{color:#0097A7!important}#ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a,#post_entry-right-info,.sidebar-colored .sidebar-nav li:hover>a,.sidebar-colored .sidebar-nav li:hover>a i,.sidebar-colored .sidebar-nav li>a:focus i,.sidebar-colored .sidebar-nav li>a:hover,.sidebar-colored .sidebar-nav li>a:hover i,.sidebar-colored .sidebar-nav>.open>a,.sidebar-colored .sidebar-nav>.open>a:focus,.sidebar-colored .sidebar-nav>.open>a:hover{color:#0097A7!important}.toTop{background:#757575!important}.material-layout .material-index>.material-nav,.material-layout .material-post>.material-nav,.material-nav a{color:#757575}#scheme-Paradox .MD-burger-layer{background-color:#757575}#scheme-Paradox #post-toc-trigger-btn{color:#757575}.post-toc a:hover{color:#00838F;text-decoration:underline}</style><style>body{background-color:#F5F5F5}#scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{background-color:#fff}</style><style>.fade{transition:all .8s linear;-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);-o-transform:translate3d(0,0,0);transform:translate3d(0,0,0);opacity:1}.fade.out{opacity:0}</style><script src="/js/jquery.min.js"></script><script src="/js/queue.js"></script><script>var agent=navigator.userAgent.toLowerCase();agent.indexOf("ucbrowser")>0&&(document.write('<link rel="stylesheet" href="/css/uc.css">'),alert("由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。"))</script></head><body id="scheme-Paradox" class="lazy"><div class="material-layout mdl-js-layout has-drawer is-upgraded"><main class="material-layout__content" id="main"><div id="top"></div><button class="MD-burger-icon sidebar-toggle"><span class="MD-burger-layer"></span></button> <button id="post-toc-trigger-btn" class="mdl-button mdl-js-button mdl-button--icon"><i class="material-icons">format_list_numbered</i></button><ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh;overflow-y:scroll"><ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Agenda"><span class="post-toc-number">1.</span> <span class="post-toc-text">Agenda</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ROS的基本命令"><span class="post-toc-number">2.</span> <span class="post-toc-text">ROS的基本命令</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#roscore"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">roscore</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#rosrun"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">rosrun</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#rosnode"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">rosnode</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#rostopic"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">rostopic</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#catkin-Build-System"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">catkin Build System</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#catkin-Workspace"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">catkin Workspace</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#catkin-Workspace-Layout"><span class="post-toc-number">2.7.</span> <span class="post-toc-text">catkin Workspace Layout</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ROS-Development-Setup"><span class="post-toc-number">3.</span> <span class="post-toc-text">ROS Development Setup</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建一个catkin-worksapce"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">创建一个catkin worksapce</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ROS-Package"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">ROS Package</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#一般的文件和文件夹"><span class="post-toc-number">3.2.1.</span> <span class="post-toc-text">一般的文件和文件夹</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#The-Package-Manifest"><span class="post-toc-number">3.2.2.</span> <span class="post-toc-text">The Package Manifest</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#创建一个ROS-package"><span class="post-toc-number">3.2.3.</span> <span class="post-toc-text">创建一个ROS package</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Eclipse与ROS的集成"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">Eclipse与ROS的集成</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Install-Eclipse"><span class="post-toc-number">3.3.1.</span> <span class="post-toc-text">Install Eclipse</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#导入工程到Eclipse中"><span class="post-toc-number">3.3.2.</span> <span class="post-toc-text">导入工程到Eclipse中</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#添加新的源文件"><span class="post-toc-number">3.3.3.</span> <span class="post-toc-text">添加新的源文件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#代码补全"><span class="post-toc-number">3.3.4.</span> <span class="post-toc-text">代码补全</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#C-第一个Node例子"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">C++第一个Node例子</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ROS-Init"><span class="post-toc-number">3.4.1.</span> <span class="post-toc-text">ROS Init</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ros-NodeHandle"><span class="post-toc-number">3.4.2.</span> <span class="post-toc-text">ros::NodeHandle</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ROS-Rate"><span class="post-toc-number">3.4.3.</span> <span class="post-toc-text">ROS::Rate</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ros-ok"><span class="post-toc-number">3.4.4.</span> <span class="post-toc-text">ros::ok()</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ROS-Debug-Messages"><span class="post-toc-number">3.4.5.</span> <span class="post-toc-text">ROS Debug Messages</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#编译节点"><span class="post-toc-number">3.4.6.</span> <span class="post-toc-text">编译节点</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#在终端运行节点"><span class="post-toc-number">3.4.7.</span> <span class="post-toc-text">在终端运行节点</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#在eclipse中运行节点"><span class="post-toc-number">3.4.8.</span> <span class="post-toc-text">在eclipse中运行节点</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Debugging"><span class="post-toc-number">3.4.9.</span> <span class="post-toc-text">Debugging</span></a></li></ol></li></ol></li></ol></ul><div class="material-post_container"><div class="material-post mdl-grid"><div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col"><div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50"><script>var randomNum=Math.floor(19*Math.random()+1);$(".post_thumbnail-random").attr("data-original","/img/random/material-"+randomNum+".png"),$(".post_thumbnail-random").addClass("lazy")</script><p class="article-headline-p">ROS Lesson2</p></div><div class="mdl-color-text--grey-700 mdl-card__supporting-text meta"><div id="author-avatar"><img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"></div><div><strong>Kuyman</strong> <span>Dec 07, 2016</span></div><div class="section-spacer"></div><button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"><i class="material-icons" role="presentation">bookmark</i> <span class="visuallyhidden">bookmark</span></button><ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button"><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/ROS-Lesson/">ROS Lesson</a></li></ul><button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"><i class="material-icons" role="presentation">share</i> <span class="visuallyhidden">share</span></button><ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button"><a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=ROS Lesson2&url=http://Kuyman2v.github.io//2016/12/07/ROS-Lesson2/index.html&pic=&searchPic=false&style=simple" target="_blank"><li class="mdl-menu__item">Share to Weibo</li></a><a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://Kuyman2v.github.io//2016/12/07/ROS-Lesson2/index.html" target="_blank"><li class="mdl-menu__item">Share to Facebook</li></a></ul></div><div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out"><h2 id="Agenda"><a href="#Agenda" class="headerlink" title="Agenda"></a>Agenda</h2><blockquote><ul><li>ROS的基本命令</li><li>ROS开发环境的建立</li><li>ROS package结构</li><li>ROS与eclipse的集成</li><li>写你的第一个node</li><li>运行和调试你的node</li></ul></blockquote><h2 id="ROS的基本命令"><a href="#ROS的基本命令" class="headerlink" title="ROS的基本命令"></a>ROS的基本命令</h2><blockquote><ul><li>roscore</li><li>rosrun</li><li>rosnode</li><li>rostopic<h3 id="roscore"><a href="#roscore" class="headerlink" title="roscore"></a>roscore</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">roscore</div></pre></td></tr></table></figure></li></ul></blockquote><p>roscore将会开启</p><blockquote><ul><li>一个 ROS Master</li><li>一个 ROS参数服务器</li><li>一个rosout日志节点</li></ul></blockquote><h3 id="rosrun"><a href="#rosrun" class="headerlink" title="rosrun"></a>rosrun</h3><p>rosrun允许你运行一个节点<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rosrun &lt;package&gt; &lt;executable&gt;</div></pre></td></tr></table></figure><p></p><h3 id="rosnode"><a href="#rosnode" class="headerlink" title="rosnode"></a>rosnode</h3><p>显示关于ROS nodes调试信息，包含发布、订阅和连接信息</p><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>$rosnode list</td><td>列出活跃节点</td></tr><tr><td>$rosnode ping</td><td>测试节点的连接情况</td></tr><tr><td>$rosnode info</td><td>打印节点信息</td></tr><tr><td>$rosnode kill</td><td>杀死一个运行节点</td></tr><tr><td>$rosnode mechine</td><td>显示某个机器上运行的节点</td></tr></tbody></table><h3 id="rostopic"><a href="#rostopic" class="headerlink" title="rostopic"></a>rostopic</h3><p>给出关于一个topic的信息，并在这个topic上发布信息</p><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>$rostopic list</td><td>列出活跃的topic</td></tr><tr><td>$rosnode echo /topic</td><td>打印topic的message到屏幕上</td></tr><tr><td>$rostopic info /topic</td><td>打印关于这个topic的信息</td></tr><tr><td>$rostopic type /topic</td><td>打印这个topic发布的message类型</td></tr><tr><td>$rostopic pub /topic type args</td><td>发布数据到一个topic上</td></tr></tbody></table><h3 id="catkin-Build-System"><a href="#catkin-Build-System" class="headerlink" title="catkin Build System"></a>catkin Build System</h3><blockquote><p>*catkin是BOS的build系统</p><pre><code>- 用来生成可执行文件、库文件和接口的一系列工具
</code></pre><p>*用传统的cmake宏和一些python代码实现的</p></blockquote><h3 id="catkin-Workspace"><a href="#catkin-Workspace" class="headerlink" title="catkin Workspace"></a>catkin Workspace</h3><blockquote><ul><li>ROS代码所处的一系列的目录</li><li>你能有多个ROS workspaces， 但是你一次只能在一个workspace中工作</li><li>workspace包含下列空间</li></ul></blockquote><table><thead><tr><th>Space</th><th>用途</th></tr></thead><tbody><tr><td>Source Space</td><td>包含了catkin packages的源代码。source中的每一个路径包含一个到多个catkin packages</td></tr><tr><td>Build Space</td><td>cmake build后在这里保存缓存信息和其他的中间文件</td></tr><tr><td>Development(Devel) Space</td><td>生成的目标文件在被安装之前放在这里</td></tr><tr><td>Install Space</td><td>一旦目标文件生成之后，他们能被安装在这里</td></tr></tbody></table><h3 id="catkin-Workspace-Layout"><a href="#catkin-Workspace-Layout" class="headerlink" title="catkin Workspace Layout"></a>catkin Workspace Layout</h3><center><img src="https://ooo.0o0.ooo/2016/12/07/58480e5ee2242.png" alt="Screenshot from 2016-12-07 21-27-38.png"></center><h2 id="ROS-Development-Setup"><a href="#ROS-Development-Setup" class="headerlink" title="ROS Development Setup"></a>ROS Development Setup</h2><blockquote><ul><li>创建一个catkin workspace</li><li>创建一个新的ROS package</li><li>下载和配置Eclipse</li><li>为你的package创建eclipse工程文件</li><li>导入package到eclipse</li><li>写代码</li><li>更新make文件</li><li>build这个package</li></ul></blockquote><h3 id="创建一个catkin-worksapce"><a href="#创建一个catkin-worksapce" class="headerlink" title="创建一个catkin worksapce"></a>创建一个catkin worksapce</h3><blockquote><ul><li><p><a href="http://wiki.ros.org/catkin/Tutorials/create_a_workspace" target="_blank" rel="external">创建向导</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">makir -p ~/catkin_ws/src</div><div class="line"><span class="built_in">cd</span> ~/catkin_ws/src</div><div class="line">catkin_init_workspace</div></pre></td></tr></table></figure></li><li><p>一开始，这个工作空间只包含顶层的CMakeLists.txt</p></li><li>catkin_make命令将会编译这个工作空间中的所有package<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> ~/catkin_ws</div><div class="line">catkin_make</div></pre></td></tr></table></figure></li></ul></blockquote><h3 id="ROS-Package"><a href="#ROS-Package" class="headerlink" title="ROS Package"></a>ROS Package</h3><blockquote><ul><li>ROS的软件被组织进packages中，每一个package都包含一些代码、数据和文件</li><li>catkin workspace中的一个package只是一个简单的目录，在这个目录中有一个package.xml文件</li><li>package是编译和发行最基本的单元</li><li>一个package包含一个或者多个节点的源代码和配置文件<h4 id="一般的文件和文件夹"><a href="#一般的文件和文件夹" class="headerlink" title="一般的文件和文件夹"></a>一般的文件和文件夹</h4></li></ul></blockquote><table><thead><tr><th>文件夹</th><th>说明</th></tr></thead><tbody><tr><td>include/</td><td>C++头文件</td></tr><tr><td>src/</td><td>源文件</td></tr><tr><td>msg/</td><td>包含Message(msg)类型的文件夹</td></tr><tr><td>srv/</td><td>包含Service(srv)类型的文件夹</td></tr><tr><td>launch/</td><td>包含launch文件的文件夹</td></tr><tr><td>package.xml</td><td>这个package的表单</td></tr><tr><td>CMakLists.txt</td><td>cmake的build文件</td></tr></tbody></table><h4 id="The-Package-Manifest"><a href="#The-Package-Manifest" class="headerlink" title="The Package Manifest"></a>The Package Manifest</h4><blockquote><ul><li>package.xml定义了这个package的属性：<ul><li>package名</li><li>版本号</li><li>作者</li><li>对其他catkin package的依赖</li><li>等等</li></ul></li><li>一个例子<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;package&gt;</div><div class="line">    &lt;name&gt;foo_core&lt;/name&gt;</div><div class="line">    &lt;version&gt;1.2.4&lt;/version&gt;</div><div class="line">    &lt;description&gt;</div><div class="line">        This package provides foo capability.</div><div class="line">    &lt;/description&gt;</div><div class="line">    &lt;maintainer email="huang.volcano@gmail.com" Can HUANG &lt;/maintainer&gt;</div><div class="line">    &lt;license&gt;BSD&lt;/license&gt;</div><div class="line">    </div><div class="line">    &lt;url&gt;http://ros.orh/wike/foo_core&lt;/url&gt;</div><div class="line">    &lt;author&gt;Can HUANG&lt;/author&gt;</div><div class="line">    </div><div class="line">    &lt;build_depend&gt;message_generation&lt;/build_depend&gt;</div><div class="line">    &lt;build_depend&gt;roscpp&lt;/build_depend&gt;</div><div class="line">    &lt;build_depend&gt;std_msgs&lt;/build_depend&gt;</div><div class="line">    </div><div class="line">    &lt;run_depend&gt;message_runrime&lt;/run_depend&gt;</div><div class="line">    &lt;run_depend&gt;roscpp&lt;/run_depend&gt;</div><div class="line">    &lt;run_depend&gt;rospy&lt;/run_depend&gt;</div><div class="line">    &lt;run_depend&gt;std_msgs&lt;/run_depend&gt;</div><div class="line">    </div><div class="line">    &lt;test_depend&gt;python-mock&lt;/test_depend&gt;</div><div class="line">&lt;/package&gt;</div></pre></td></tr></table></figure></li></ul></blockquote><h4 id="创建一个ROS-package"><a href="#创建一个ROS-package" class="headerlink" title="创建一个ROS package"></a>创建一个ROS package</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> ~/catkin_ws/src</div><div class="line">catkin_create_pkg &lt;package_name&gt; [depend1] [depend2] [depend3]</div></pre></td></tr></table></figure><p>例如<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">catkin_create_pkg first_pkg std_msgs rospy roscpp</div></pre></td></tr></table></figure><p></p><h3 id="Eclipse与ROS的集成"><a href="#Eclipse与ROS的集成" class="headerlink" title="Eclipse与ROS的集成"></a>Eclipse与ROS的集成</h3><h4 id="Install-Eclipse"><a href="#Install-Eclipse" class="headerlink" title="Install Eclipse"></a>Install Eclipse</h4><blockquote><ul><li><p>确保安装了jvm</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install default-jre</div></pre></td></tr></table></figure></li><li><p><a href="https://www.eclipse.org/downloads/eclipse-packages/" target="_blank" rel="external">下载</a>eclipse IDE for C/C++ developers</p></li><li>提取eclipse到一个文件夹</li><li><p>把eclipse移到/opt文件夹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo mv eclipse /opt</div></pre></td></tr></table></figure></li><li><p>创建一个链接以便让其他用户使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo ln -s /opt/eclipse/eclipse /usr/bin/eclipse</div><div class="line">``` </div><div class="line">&gt;* 在Unity Dash中创建快捷访问</div><div class="line"><span class="variable">$sudo</span> gedit /usr/share/applications/eclipse.desktop</div></pre></td></tr></table></figure></li></ul></blockquote><p>[Desktop Entry]<br>Name=Eclipse<br>Type=Application<br>Exec=bash -i -c “/opt/eclipse/eclipse”<br>Terminal=false<br>Icon=/opt/eclipse/icon.xpm<br>Comment=Integrated Development Environment<br>NoDisplay=false<br>Categories=Devilopment;IDE<br>Name[en]=eclipse.desktop<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#### Make Eclipse Project Files</div><div class="line">```bash</div><div class="line">cd ~/catkin_ws</div><div class="line">catkin_make_ --force-cmake -G&quot;Eclipse CDT4 - Unix Makefiles&quot;</div></pre></td></tr></table></figure><p></p><p>eclipse的工程文件将会在~/catkin_ws/build中生成</p><h4 id="导入工程到Eclipse中"><a href="#导入工程到Eclipse中" class="headerlink" title="导入工程到Eclipse中"></a>导入工程到Eclipse中</h4><blockquote><ul><li>打开eclipse</li><li>选择catkin_ws文件夹作为工作空间<center><img src="https://ooo.0o0.ooo/2016/12/08/5848aa1e48e22.png" alt="1.png"></center></li><li>依次选择File –&gt; Import –&gt; General –&gt; Existing Project into Workspace<center><img src="https://ooo.0o0.ooo/2016/12/08/5848aa1e6682b.png" alt="2.png"></center></li><li>现在从~/catkin_ws/build文件夹中导入工程<center><img src="https://ooo.0o0.ooo/2016/12/08/5848aa1e6592f.png" alt="3.png"></center></li><li>默认地，elipse的智能感知将不会识别这个系统的头文件(像<string>).解决如下：<ul><li>点Project Propertios –&gt; C/C++ General –&gt; Preprocessor Include Paths, Macros, etc. –&gt; Providers tab</li><li>Check CDT GCC Build-in Compiler Settings [Shared]<center><img src="https://ooo.0o0.ooo/2016/12/08/5848aa1e6770d.png" alt="5.png"></center></li></ul></string></li><li>之后，rebuild 这个C/C++ index通过右键项目 –&gt; Index –&gt; Rebuild<br><center><img src="https://ooo.0o0.ooo/2016/12/08/5848aa1e68df6.png" alt="6.png"><center></center></center></li><li>Eclipse提供了一个链接”Source directory”，这样你就能编辑源代码了<br><center><img src="https://ooo.0o0.ooo/2016/12/08/5848aa1e4b13f.png" alt="7.png"></center><h4 id="添加新的源文件"><a href="#添加新的源文件" class="headerlink" title="添加新的源文件"></a>添加新的源文件</h4></li><li>右键src并选择 New –&gt; Source File, 然后新建一个hello.cpp文件<br><center><img src="https://ooo.0o0.ooo/2016/12/08/5848aa1e6a012.png" alt="8.png"></center><h4 id="代码补全"><a href="#代码补全" class="headerlink" title="代码补全"></a>代码补全</h4><center><img src="https://ooo.0o0.ooo/2016/12/08/5848aa1e89cda.png" alt="9.png"></center><br>默认是Ctrl+Space</li></ul></blockquote><h3 id="C-第一个Node例子"><a href="#C-第一个Node例子" class="headerlink" title="C++第一个Node例子"></a>C++第一个Node例子</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * hello.cpp</div><div class="line"> *</div><div class="line"> *  Created on: Dec 8, 2016</div><div class="line"> *      Author: volcanoh</div><div class="line"> */</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ros/ros.h"</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc ,<span class="keyword">char</span>** argv)</span></span></div><div class="line">&#123;</div><div class="line">	ros::init(argc, argv, <span class="string">"hello"</span>);</div><div class="line"></div><div class="line">	ros::NodeHandle nh;</div><div class="line">	ros::<span class="function">Rate <span class="title">loop_rate</span><span class="params">(<span class="number">10</span>)</span></span>;</div><div class="line"></div><div class="line">	<span class="keyword">int</span> count = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(ros::ok())</div><div class="line">	&#123;</div><div class="line">		ROS_INFO_STREAM(<span class="string">"hello world"</span> &lt;&lt; count);</div><div class="line"></div><div class="line">		ros::spinOnce();</div><div class="line">		loop_rate.sleep(); count++;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="ROS-Init"><a href="#ROS-Init" class="headerlink" title="ROS Init"></a>ROS Init</h4><p>ros::init()必须在ROS的其他部分之前调用<br>在main()函数中典型的调用是：</p><pre><code>ros::init(argc, argv, &quot;Node name&quot;);
</code></pre><p>在一个运行的系统中，Node的名字必须是独一无二的。</p><h4 id="ros-NodeHandle"><a href="#ros-NodeHandle" class="headerlink" title="ros::NodeHandle"></a>ros::NodeHandle</h4><p>这是与ROS系统通信的主要访问点。</p><blockquote><ul><li>提供topics、services、parameters等的公共接口<br>在ros::init()之后创建这个节点的handle通过如下申明:<br>ros::NodeHandle node;<ul><li>第一个NodeHandle构造时将会完整的初始化当前节点</li><li>最后一个NodeHandle被析构时将关闭这个节点<h4 id="ROS-Rate"><a href="#ROS-Rate" class="headerlink" title="ROS::Rate"></a>ROS::Rate</h4>这是一个类，它能让你以一个想要的频率调用一个循环。该频率是以Hz为单位。</li></ul></li></ul></blockquote><pre><code>ros::Rate loop_rate(10);
</code></pre><blockquote><ul><li>ros::Rate::sleep()方法<ul><li>在一个循环的剩余时间中睡眠</li><li>这个时间是根据上次sleep、reset或者constructor被调用时开始计算<h4 id="ros-ok"><a href="#ros-ok" class="headerlink" title="ros::ok()"></a>ros::ok()</h4></li></ul></li><li>调用ros::ok()来检查这个节点是否应该继续运行</li><li>ros::ok()将会返回false如果：<ul><li>接受到Ctrl-C信号</li><li>被另外一个有相同名字的节点杀掉</li><li>在这个程序的另外一个位置调用了ros::shutdown()</li><li>所有的ros::NodeHandles都被析构了<h4 id="ROS-Debug-Messages"><a href="#ROS-Debug-Messages" class="headerlink" title="ROS Debug Messages"></a>ROS Debug Messages</h4></li></ul></li><li>ROS_INFO能打印消息<ul><li>ROS_INFO(“My INFO message.”);</li></ul></li><li>所有的消息会伴随着他们的消息等级和时间戳被打印出来<ul><li>[INFO][1231245123.12738912749]:My INFO message.</li></ul></li><li>这个函数的参数如同printf：<ul><li>ROS_INFO(“My INFO message with argument: %f”, val);</li></ul></li><li>有5个典型的等级:<br>*DEBUG, INFO, WARN, ERRORM, FATAL</li><li>ROS<em><level>[</level></em><other>]</other></li><li>支持C++ STL流*_STREAM function<ul><li>ROS_INFO_STREAM(“My INFO stream message with argument:” &lt;&lt; val);</li></ul></li></ul></blockquote><h4 id="编译节点"><a href="#编译节点" class="headerlink" title="编译节点"></a>编译节点</h4><p>在编译节点之前，你需要修改这个包的CMakeLists.txt<br></p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span>.<span class="number">3</span>)</div><div class="line"><span class="keyword">project</span>(first_pkg)</div><div class="line"></div><div class="line"><span class="comment">## Find catkin macros and libraries</span></div><div class="line"><span class="keyword">find_package</span>(catkin REQUIRED COMPONENTS roscpp rospy std_msgs)</div><div class="line"></div><div class="line"><span class="comment">## Declara catkin package</span></div><div class="line">catkin_package()</div><div class="line"></div><div class="line"><span class="comment">## Declare a cpp executable</span></div><div class="line"><span class="keyword">add_executable</span>(hello src/hello.cpp)</div><div class="line"></div><div class="line"><span class="comment">## Specify libraries to link a library or executable targe against</span></div><div class="line"><span class="keyword">target_link_libraries</span>(hello <span class="variable">$&#123;catkin_LIBRARIES&#125;</span>)</div></pre></td></tr></table></figure><p></p><p>在eclipse中按Ctrl-B来编译这个project，或者在终端调用catkin_make</p><h4 id="在终端运行节点"><a href="#在终端运行节点" class="headerlink" title="在终端运行节点"></a>在终端运行节点</h4><pre><code>cd ~/catkin_ws
source ./devel/setup.bash
</code></pre><p>或者你能将上面这行加到.bashrc中<br>现在你能用rosrun运行你的节点了：</p><pre><code>rosrun first_pkg hello
</code></pre><center><img src="https://ooo.0o0.ooo/2016/12/08/5848c6164b81c.png" alt="1.png"></center><h4 id="在eclipse中运行节点"><a href="#在eclipse中运行节点" class="headerlink" title="在eclipse中运行节点"></a>在eclipse中运行节点</h4><blockquote><ul><li>创建一个新的launch configuration，点击Run –&gt; Run configurations… –&gt; C/C++ Application（双击）</li><li>在main页里选择正确的二进制文件<code>~/catkin_ws/devel/lib/first_pkg/hello</code></li><li>确保你已经在终端运行了roscore</li><li>点击Run<center><img src="https://ooo.0o0.ooo/2016/12/08/5848c705b2e85.png" alt="2.png"></center><br><center><img src="https://ooo.0o0.ooo/2016/12/08/5848c7370db99.png" alt="3.png"></center></li></ul></blockquote><h4 id="Debugging"><a href="#Debugging" class="headerlink" title="Debugging"></a>Debugging</h4><p>要让eclipse能够调试，你应该先在catkin_ws/build中执行下列命令：</p><pre><code>cmake ../src -DCMAKE_BUILD_TYPE=Debug
</code></pre><p>重启eclipse<br>然后你就能在eclipse中使用标准的调试工具了</p><center><img src="https://ooo.0o0.ooo/2016/12/08/5848c7f997dcb.png" alt="4.png"></center></div></div><nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col"><a href="/2016/12/20/ROS-Lesson3/" id="post_nav-newer" class="prev-content"><button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation"><i class="material-icons">arrow_back</i></button> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Newer</a><div class="section-spacer"></div><a href="/2016/12/06/ROS-Lesson1/" id="post_nav-older" class="next-content">Older &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation"><i class="material-icons">arrow_forward</i></button></a></nav></div></div><div class="sidebar-overlay"></div><aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation"><div id="sidebar-main"><div class="sidebar-header header-cover" style="background-image:url(/img/sidebar_header.png)"><div class="top-bar"></div><button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display:initial" data-upgraded=",MaterialButton,MaterialRipple"><i class="material-icons">clear_all</i> <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></button><div class="sidebar-image"><img src="/img/avatar.png" alt="Kuyman's avatar"></div><a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">undefined <b class="caret"></b></a></div><ul class="nav sidebar-nav"><li class="dropdown"><ul id="settings-dropdown" class="dropdown-menu"><li><a href="mailto: kuyman2v@163.com" target="_blank" title="Email Me"><i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i> Email Me</a></li></ul></li><li id="sidebar-first-li"><a href="/" target="_self"><i class="material-icons sidebar-material-icons">home</i> Home</a></li><li class="dropdown"><a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown"><i class="material-icons sidebar-material-icons">inbox</i> Archives <b class="caret"></b></a><ul class="dropdown-menu"><li><a class="sidebar_archives-link" href="/archives/2017/03/">March 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/12/">December 2016<span class="sidebar_archives-count">5</span></a></li></ul></li><li class="dropdown"><a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown"><i class="material-icons sidebar-material-icons">chrome_reader_mode</i> Categories <b class="caret"></b></a><ul class="dropdown-menu"><li></li></ul></li><li><a href="#about" title="About"><i class="material-icons sidebar-material-icons">person</i> About</a></li><li><a href="/archives">Articles <span class="sidebar-badge">6</span></a></li></ul><div class="sidebar-divider"></div></div></aside><div id="back-to-top" class="toTop-wrap"><a href="#top" class="toTop"><i class="material-icons footer_top-i">expand_less</i></a></div><footer class="mdl-mini-footer" id="bottom"><div class="mdl-mini-footer--left-section sns-list"><a href="https://twitter.com/twitter" target="_blank"><button class="mdl-mini-footer--social-btn social-btn" style="background-image:url(undefinedtwitter.svg)"><span class="visuallyhidden">Twitter</span></button></a><a href="https://www.facebook.com/facebook" target="_blank"><button class="mdl-mini-footer--social-btn social-btn" style="background-image:url(undefinedfacebook.svg)"><span class="visuallyhidden">Facebook</span></button></a><a href="https://www.google.com/" target="_blank"><button class="mdl-mini-footer--social-btn social-btn" style="background-image:url(undefinedgplus.svg)"><span class="visuallyhidden">Google Plus</span></button></a></div><div id="copyright">Copyright&nbsp;©&nbsp;<script type="text/javascript">var fd=new Date;document.write(fd.getFullYear())</script>&nbsp;Kuyman's blog</div><div class="mdl-mini-footer--right-section"><div><div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div><div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div></div></div></footer><script src="/js/lazyload.min.js"></script><script src="/js/js.js"></script><script src="/js/nprogress.js"></script><script type="text/javascript">NProgress.configure({showSpinner:!0}),NProgress.start(),$("#nprogress .bar").css({background:"#29d"}),$("#nprogress .peg").css({"box-shadow":"0 0 10px #29d, 0 0 15px #29d"}),$("#nprogress .spinner-icon").css({"border-top-color":"#29d","border-left-color":"#29d"}),setTimeout(function(){NProgress.done(),$(".fade").removeClass("out")},800)</script><script>$(window).load(function(){$(".post-toc-wrap").parent(".mdl-menu__container").css("position","fixed")})</script><script>queue.offer(function(){$(".lazy").lazyload({effect:"show"})}),$(document).ready(function(){setTimeout(function(){setInterval(function(){queue.execNext()},200)},3e3)})</script></main></div></body></html>